---
import Logo from '../components/Logo.astro';

interface Props {
  title: string;
  description?: string;
  canonicalURL?: string;
  ogImage?: string;
  keywords?: string;
}

const { 
  title, 
  description = "Talanton Go - The Weight of Your Audience Matters. Transform customer interactions into meaningful, measurable value. We help franchises, retailers, and growing brands understand their audience and build systems that nurture them for life.",
  canonicalURL = Astro.url,
  ogImage = new URL('/og-image.jpg', Astro.site || Astro.url).href,
  keywords = "customer relationship management, CRM modernization, audience intelligence, lifecycle marketing, franchise solutions, customer retention, marketing automation, customer engagement, retail marketing, franchise marketing"
} = Astro.props;

const fullTitle = title.includes('Talanton Go') ? title : `${title} | Talanton Go`;
const siteURL = Astro.site?.href || canonicalURL.toString().replace(Astro.url.pathname, '');
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <meta name="author" content="Talanton Go" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    <meta name="googlebot" content="index, follow" />
    <meta name="theme-color" content="#000000" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="Talanton Go" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonicalURL} />
    <meta name="twitter:title" content={fullTitle} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    
    <meta name="generator" content={Astro.generator} />
    <title>{fullTitle}</title>
  </head>
  <body>
    <header class="header" role="banner">
      <nav class="nav" role="navigation" aria-label="Main navigation">
        <a href="/" class="logo-link" aria-label="Talanton Go Home">
          <Logo />
          <img src="/navigation-banner.png" alt="Talanton Go" class="logo-banner" />
        </a>
        <button class="menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
          <span class="menu-icon"></span>
          <span class="menu-icon"></span>
          <span class="menu-icon"></span>
        </button>
        <div class="nav-links" id="nav-links">
          <a href="#about" aria-label="About Talanton Go">About</a>
          <a href="#services" aria-label="Our Services">Services</a>
          <a href="#philosophy" aria-label="Our Philosophy">Philosophy</a>
          <a href="#values" aria-label="Our Values">Values</a>
          <a href="#contact" aria-label="Contact Us">Contact</a>
        </div>
      </nav>
    </header>
    <main id="main-content" role="main">
      <slot />
    </main>
    <footer class="footer" role="contentinfo">
      <p>&copy; 2026 Talanton Go. All rights reserved.</p>
    </footer>
  </body>
</html>

<style is:global>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  :root {
    --yellow: #FFD700;
    --orange-light: #FF8C00;
    --orange-medium: #FF7F00;
    --orange-dark: #FF4500;
    --orange-deep: #FF6347;
    --silver: #C0C0C0;
    --silver-light: #E8E8E8;
    --silver-dark: #A8A8A8;
    --text-dark: #1a1a1a;
    --text-light: #ffffff;
    --bg-light: #FFF8E7;
    --bg-white: #ffffff;
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-700: #374151;
    --gray-900: #111827;
    --black: #000000;
  }

  html {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, 'Helvetica Neue', Arial, sans-serif;
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background: var(--bg-white);
    color: var(--text-dark);
    line-height: 1.7;
    font-size: 16px;
  }

  .header {
    background: linear-gradient(135deg, var(--yellow) 0%, var(--orange-light) 50%, var(--orange-dark) 100%);
    padding: 1.25rem 2rem;
    box-shadow: 0 4px 12px rgba(255, 69, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(10px);
  }

  .nav {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .logo-link {
    display: flex;
    align-items: center;
    gap: 0.875rem;
    text-decoration: none;
    color: var(--text-dark);
    font-weight: 700;
    font-size: 1.375rem;
    transition: transform 0.2s;
    letter-spacing: -0.02em;
  }

  .logo-link:hover {
    transform: scale(1.02);
  }

  .logo-banner {
    height: auto;
    max-height: 3rem;
    display: block;
  }

  .nav-links {
    display: flex;
    gap: 2.5rem;
    align-items: center;
  }

  .nav-links a {
    color: var(--text-dark);
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9375rem;
    transition: color 0.2s;
    position: relative;
    letter-spacing: -0.01em;
  }

  .nav-links a:hover {
    color: var(--text-light);
  }

  .nav-links a::after {
    content: '';
    position: absolute;
    bottom: -6px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--text-light);
    transition: width 0.3s ease;
    border-radius: 2px;
  }

  .nav-links a:hover::after {
    width: 100%;
  }

  .menu-toggle {
    display: none;
    flex-direction: column;
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    gap: 0.375rem;
    z-index: 101;
    position: relative;
  }

  .menu-icon {
    width: 1.5rem;
    height: 3px;
    background: var(--text-dark);
    border-radius: 2px;
    transition: all 0.3s ease;
  }

  .menu-toggle[aria-expanded="true"] .menu-icon:nth-child(1) {
    transform: rotate(45deg) translate(0.375rem, 0.375rem);
  }

  .menu-toggle[aria-expanded="true"] .menu-icon:nth-child(2) {
    opacity: 0;
  }

  .menu-toggle[aria-expanded="true"] .menu-icon:nth-child(3) {
    transform: rotate(-45deg) translate(0.375rem, -0.375rem);
  }

  .footer {
    background: var(--black);
    color: var(--text-light);
    text-align: center;
    padding: 3rem 2rem;
    margin-top: 6rem;
  }

  .footer p {
    font-size: 0.875rem;
    color: var(--text-light);
    opacity: 0.9;
  }

  @media (max-width: 600px) {
    .nav {
      flex-wrap: wrap;
      position: relative;
    }

    .menu-toggle {
      display: flex;
    }

    .nav-links {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: linear-gradient(135deg, var(--yellow) 0%, var(--orange-light) 50%, var(--orange-dark) 100%);
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0;
      padding: 1rem 0;
      box-shadow: 0 4px 12px rgba(255, 69, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
      margin-top: 1rem;
      border-radius: 0 0 8px 8px;
    }

    .nav-links.menu-open {
      display: flex;
    }

    .nav-links a {
      padding: 1rem 2rem;
      width: 100%;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .nav-links a:last-child {
      border-bottom: none;
    }

    .nav-links a::after {
      display: none;
    }

    .nav-links a:hover {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
    }

    .logo-link {
      flex: 1;
      min-width: 0;
    }

    .header {
      padding: 1rem 1.5rem;
    }
  }

  @media (max-width: 768px) and (min-width: 601px) {
    .nav {
      flex-direction: row;
      justify-content: space-between;
      gap: 1rem;
    }

    .logo-link {
      flex-shrink: 0;
      max-width: calc(100% - 200px);
    }

    .nav-links {
      flex-wrap: wrap;
      justify-content: flex-end;
      gap: 0.75rem;
    }

    .header {
      padding: 1rem 1.5rem;
    }
  }

  @media (max-width: 480px) {
    .header {
      padding: 0.875rem 1rem;
    }

    .logo-link {
      font-size: 1.25rem;
    }
  }

  /* Touch target optimization for mobile */
  @media (pointer: coarse) {
    .nav-links a {
      min-height: 44px;
      display: flex;
      align-items: center;
      padding: 0.5rem 0;
    }

    .menu-toggle {
      min-width: 44px;
      min-height: 44px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const menuToggle = document.querySelector('.menu-toggle');
    const navLinks = document.querySelector('#nav-links');
    
    if (menuToggle && navLinks) {
      menuToggle.addEventListener('click', () => {
        const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
        menuToggle.setAttribute('aria-expanded', !isExpanded);
        navLinks.classList.toggle('menu-open');
      });

      // Close menu when clicking on a link
      navLinks.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          menuToggle.setAttribute('aria-expanded', 'false');
          navLinks.classList.remove('menu-open');
        });
      });

      // Close menu when clicking outside
      document.addEventListener('click', (e) => {
        if (window.innerWidth <= 600) {
          if (!menuToggle.contains(e.target) && !navLinks.contains(e.target)) {
            menuToggle.setAttribute('aria-expanded', 'false');
            navLinks.classList.remove('menu-open');
          }
        }
      });
    }
  });
</script>


